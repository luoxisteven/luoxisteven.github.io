"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[198],{4367:(e,t,r)=>{r.d(t,{A:()=>p});var a=r(7353),o=r(9252),n=r(8446),i=r(5043),s=r(1045),l=r(4496),d=r(6295),c=r(579);function h(e){let{language:t}=e;return(0,c.jsxs)(l.A,{variant:"body1",sx:{color:"text.secondary",mt:1,typography:{md:"body1"}},children:["All Rights Reserved \xa9 ",(0,c.jsx)(n.A,{color:"text.secondary",href:"https://xiluo.net/",sx:{typography:{md:"body1"}},children:"xiluo.net"}),"\xa0",(new Date).getFullYear()]})}function p(){const{language:e,themeMode:t}=(0,i.useContext)(d.l),p="cn"===e?"/md/cn/terms":"/md/en/terms",u="cn"===e?"/md/cn/privacy":"/md/en/privacy";return(0,c.jsx)(i.Fragment,{children:(0,c.jsxs)(o.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:{md:"space-between"},alignItems:{xs:"flex-start",md:"center"},px:{xs:4},py:{xs:2,sm:5}},children:[(0,c.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:{xs:2,sm:3},textAlign:"left",alignItems:"flex-start",mb:{xs:2,md:0},pb:2,width:"100%",borderBottom:e=>({xs:`1px solid ${e.palette.divider}`,sm:"none"})},children:[(0,c.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[(0,c.jsx)(s.A,{src:r(5567),alt:"Steven Logo",sx:{width:30,height:30,overflow:"hidden"}}),(0,c.jsx)(l.A,{variant:"body1",sx:{color:"text.secondary",fontStyle:"italic",fontWeight:600,letterSpacing:.5},children:"Thy sky is the limit."})]}),(0,c.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:2},children:[{path:"/",labelCn:"\u9996\u9875",labelEn:"Home"},{path:"/notes",labelCn:"\u7b14\u8bb0",labelEn:"Notes"},{path:"/blogs",labelCn:"\u535a\u5ba2",labelEn:"Blogs"},{path:"/projects",labelCn:"\u9879\u76ee",labelEn:"Projects"},{path:"/fin",labelCn:"\u91d1\u878d\u9762\u677f",labelEn:"Finance"},{path:"/profile",labelCn:"\u4e2a\u4eba\u7b80\u4ecb",labelEn:"Profile"}].map((t=>{let{path:r,labelCn:a,labelEn:o}=t;return(0,c.jsx)(n.A,{color:"text.secondary",variant:"body1",href:r,sx:{typography:{md:"body1"}},children:"cn"===e?a:o},r)}))})]}),(0,c.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:{xs:"flex-start",md:"flex-end"},textAlign:{xs:"left",md:"right"},gap:1,mt:{md:2}},children:[(0,c.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",gap:2},children:[(0,c.jsx)(l.A,{variant:"body1",sx:{fontWeight:"medium"},children:"cn"===e?"\u6cd5\u5f8b":"Legal"}),[{label:"cn"===e?"\u6761\u6b3e":"Terms",path:p},{label:"cn"===e?"\u9690\u79c1":"Privacy",path:u}].map((e=>{let{label:t,path:r}=e;return(0,c.jsx)(n.A,{color:"text.secondary",variant:"body1",href:r,children:t},t)}))]}),(0,c.jsx)(h,{language:e})]})]})})}},4198:(e,t,r)=>{r.r(t),r.d(t,{default:()=>V});var a=r(5043),o=r(7353),n=r(9252),i=r(8387),s=r(8610),l=r(3424),d=r(6803),c=r(2532),h=r(2372);function p(e){return(0,h.Ay)("MuiFab",e)}const u=(0,c.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var x=r(1475),g=r(4535),m=r(6262),b=r(2445),y=r(8206),f=r(579);const v=(0,g.Ay)(l.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,x.A)(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${(0,d.A)(r.size)}`],"inherit"===r.color&&t.colorInherit,t[(0,d.A)(r.size)],t[r.color]]}})((0,m.A)((e=>{let{theme:t}=e;return{...t.typography.button,minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:t.palette.getContrastText?.(t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},[`&.${u.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}})),(0,m.A)((e=>{let{theme:t}=e;return{variants:[...Object.entries(t.palette).filter((0,b.A)(["dark","contrastText"])).map((e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].contrastText,backgroundColor:(t.vars||t).palette[r].main,"&:hover":{backgroundColor:(t.vars||t).palette[r].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[r].main}}}}}))]}})),(0,m.A)((e=>{let{theme:t}=e;return{[`&.${u.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}}))),A=a.forwardRef((function(e,t){const r=(0,y.b)({props:e,name:"MuiFab"}),{children:a,className:o,color:n="default",component:l="button",disabled:c=!1,disableFocusRipple:h=!1,focusVisibleClassName:u,size:x="large",variant:g="circular",...m}=r,b={...r,color:n,component:l,disabled:c,disableFocusRipple:h,size:x,variant:g},A=(e=>{const{color:t,variant:r,classes:a,size:o}=e,n={root:["root",r,`size${(0,d.A)(o)}`,"inherit"===t?"colorInherit":t]},i=(0,s.A)(n,p,a);return{...a,...i}})(b);return(0,f.jsx)(v,{className:(0,i.A)(A.root,o),component:l,disabled:c,focusRipple:!h,focusVisibleClassName:(0,i.A)(A.focusVisible,u),ownerState:b,ref:t,...m,classes:A,children:a})}));var w=r(794),j=r(4194),C=r(4494),z=r(6295),S=r(1637),k=r(4496),$=r(8903),F=r(2110),B=r(6494),D=r(1906),E=r(330),M=r(9002),_=r(2678);const R=e=>{let{sx:t}=e;const{language:r,themeMode:i}=(0,a.useContext)(z.l),{userState:s}=(0,_.J)(),[l,d]=(0,a.useState)([]),[c,h]=(0,a.useState)(0),[p,u]=(0,a.useState)(!0),[x,g]=(0,a.useState)(!1),[m,b]=(0,a.useState)(null),[y,v]=(0,a.useState)(1),[A]=(0,a.useState)(3),[w,j]=(0,a.useState)(!0),C=(0,M.Zp)();(0,a.useEffect)((()=>{(async()=>{try{u(!0),b(null);const e=await E.A.getMeta(s.access,1,A);d(e.data),h(e.total),v(1),j(e.data.length<e.total),u(!1)}catch(m){console.error("Error fetching metadata:",m),b("cn"===r?"404 \n \u670d\u52a1\u5668\u8bbf\u95ee\u5931\u8d25 \n \u65e0\u6cd5\u52a0\u8f7d\u535a\u5ba2":"404 \n Internal Server Error \n Fail to load blogs"),u(!1)}})()}),[r,s.access,A]);return(0,f.jsx)(n.A,{maxWidth:"md",sx:{...t},children:p?(0,f.jsx)(o.A,{display:"flex",justifyContent:"center",mt:3.5,children:(0,f.jsx)(S.A,{})}):m?(0,f.jsx)(k.A,{variant:"h6",color:"error",align:"center",mt:3.5,style:{whiteSpace:"pre-line"},children:m}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)($.Ay,{container:!0,spacing:2,direction:"column",children:l.map((e=>(0,f.jsx)($.Ay,{item:!0,children:(0,f.jsx)(F.A,{sx:{background:"transparent",borderBottom:"1px solid "+("light"===i?"#ccc":"#555"),borderRadius:0,boxShadow:"none",cursor:"pointer"},onClick:()=>{return t=e.id,void C(`/blog/${t}`);var t},children:(0,f.jsxs)(B.A,{children:[(0,f.jsx)(k.A,{variant:"h5",component:"div",gutterBottom:!0,sx:{fontFamily:"Georgia, serif",fontWeight:"bold"},children:"cn"===r?e.cn_title:e.en_title}),(0,f.jsx)(k.A,{variant:"body1",color:"text.primary",sx:{fontFamily:"Georgia, serif"},children:"cn"===r?e.cn_summary:e.en_summary}),(0,f.jsx)(o.A,{display:"flex",justifyContent:"flex-end",mt:2,sx:{fontFamily:"Georgia, serif"},children:(0,f.jsx)(k.A,{variant:"body1",color:"text.secondary",children:new Date(e.publish_date).toLocaleDateString("cn"===r?"zh-CN":"en-GB",{day:"2-digit",month:"cn"===r?"2-digit":"short",year:"numeric"})})})]})})},e.id)))}),w&&(0,f.jsx)(o.A,{display:"flex",justifyContent:"center",mt:2,children:(0,f.jsx)(D.A,{onClick:async()=>{try{g(!0);const e=y+1,t=await E.A.getMeta(s.access,e,A);d((e=>[...e,...t.data])),v(e);const r=l.length+t.data.length;j(r<t.total),g(!1)}catch(m){console.error("Error loading more blogs:",m),g(!1)}},disabled:x,color:"light"===i?"primary":"info",variant:"text",sx:{fontFamily:"Georgia, serif",textTransform:"none",fontSize:"1rem","&:hover":{backgroundColor:"transparent",color:"light"===i?"#0d47a1":"info.dark"},"&.Mui-disabled":{color:"text.disabled"}},children:x?(0,f.jsx)(S.A,{size:20,color:"info"}):"cn"===r?"\u52a0\u8f7d\u66f4\u591a":"Load More"})}),(0,f.jsx)(o.A,{display:"flex",justifyContent:"center",mt:2,mb:2,children:(0,f.jsx)(k.A,{variant:"body",color:"text.secondary",sx:{fontFamily:"Georgia, serif"},children:"cn"===r?`\u5df2\u663e\u793a ${l.length} / ${c} \u7bc7\u6587\u7ae0`:`Showing ${l.length} / ${c} articles`})})]})})};const T=(0,r(9662).A)((0,f.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var I=r(4367),W=r(9817);const N={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},V=()=>{const{language:e,themeMode:t,toggleLanguage:r,toggleTheme:i}=(0,a.useContext)(z.l),{userState:s}=(0,_.J)(),l=(0,M.Zp)(),[d,c]=(0,M.ok)(),[h,p]=(0,a.useState)(!1),[u,x]=(0,a.useState)("");(0,a.useEffect)((()=>{"true"===d.get("updated")&&(x("cn"===e?"\u535a\u5ba2\u5df2\u6210\u529f\u53d1\u5e03\uff01":"Blog added successfully!"),p(!0),d.delete("updated"),c(d,{replace:!0}))}),[d,c,e]);return(0,f.jsxs)(o.A,{children:[(0,f.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,f.jsx)(C.A,{}),(0,f.jsx)(W.P.div,{initial:"hidden",animate:"visible",variants:N,children:(0,f.jsx)(n.A,{maxWidth:"lg",sx:{display:"flex",flexDirection:"column",mt:"100px"},children:(0,f.jsx)(R,{})})}),s.is_staff&&(0,f.jsx)(A,{color:"primary","aria-label":"add",onClick:()=>{l("/addblog")},sx:{position:"fixed",bottom:"50px",right:"calc((100% - 1200px) / 2 + 20px)","@media (max-width: 1280px)":{right:"30px"}},children:(0,f.jsx)(T,{})})]}),(0,f.jsx)(o.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"background.default",borderTop:e=>({xs:"none",md:`1px solid ${e.palette.divider}`}),maxWidth:e=>e.breakpoints.values.lg,width:"100%",mx:"auto"},children:(0,f.jsx)(I.A,{})}),(0,f.jsx)(w.A,{open:h,autoHideDuration:1e3,onClose:()=>{p(!1)},anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,f.jsx)(j.A,{severity:"success",sx:{width:"100%"},children:u})})]})}},330:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(4505);const o={getBlog:async(e,t)=>{try{return(await a.A.get(`/blog/${e}/`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(r){throw console.error("Error fetching blog:",r),r}},addBlog:async(e,t)=>{try{const r=new FormData;for(const[t,a]of Object.entries(e))r.append(t,a);return(await a.A.post("/add_blog/",r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error adding blog:",r),r}},editBlog:async function(e,t,r){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];try{console.log(t);const n=o?"patch":"put",i=new FormData;for(const e in t)void 0!==t[e]&&null!==t[e]&&i.append(e,t[e]);return(await a.A[n](`/edit_blog/${e}/`,i,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error editing blog:",n),n}},toggleVisibility:async(e,t)=>{try{return(await a.A.patch(`/edit_visibility/${e}/`,null,{headers:{Authorization:`Bearer ${t}`}})).data}catch(r){throw console.error("Error toggling blog visibility:",r),r}},getMeta:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const o=new FormData;null!==t&&null!==r&&(o.append("page",t),o.append("page_size",r));return(await a.A.post("/get_blog_meta/",o,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${e}`}})).data}catch(o){throw console.error("Error fetching blog metadata:",o),o}},deleteBlog:async(e,t)=>{try{return(await a.A.delete(`/delete_blog/${e}/`,{headers:{Authorization:`Bearer ${t}`}})).status}catch(r){throw console.error("Error deleting blog:",r),r}},getDraft:async(e,t)=>{try{return(await a.A.get(`/get_draft_blog/${e}/`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(r){throw console.error("Error fetching draft:",r),r}},saveDraft:async(e,t)=>{try{const r=new FormData;for(const[t,a]of Object.entries(e))r.append(t,a);return(await a.A.post("/save_draft_blog/",r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error saving draft:",r),r}}}},6494:(e,t,r)=>{r.d(t,{A:()=>u});var a=r(5043),o=r(8387),n=r(8610),i=r(4535),s=r(8206),l=r(2532),d=r(2372);function c(e){return(0,d.Ay)("MuiCardContent",e)}(0,l.A)("MuiCardContent",["root"]);var h=r(579);const p=(0,i.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),u=a.forwardRef((function(e,t){const r=(0,s.b)({props:e,name:"MuiCardContent"}),{className:a,component:i="div",...l}=r,d={...r,component:i},u=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},c,t)})(d);return(0,h.jsx)(p,{as:i,className:(0,o.A)(u.root,a),ownerState:d,ref:t,...l})}))}}]);
//# sourceMappingURL=198.b2d18341.chunk.js.map