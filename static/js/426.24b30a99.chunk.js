"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[426],{5426:(t,e,n)=>{n.r(e),n.d(e,{default:()=>N});var o=n(5043),r=n(7353),i=n(3625),l=n(4056),a=n(5795),c=n(1906),s=n(794),d=n(4194),u=n(9002),x=n(4494),h=n(2141),f=n(330),g=n(6295),C=n(2678),p=n(4410),m=n(579);const N=()=>{const t=(0,u.Zp)(),{blogID:e}=(0,u.g)(),{themeMode:n,language:N}=(0,o.useContext)(g.l),{userState:v}=(0,C.J)(),[S,E]=(0,o.useState)(0),[b,y]=(0,o.useState)({CN:{title:"",content:p.EditorState.createEmpty()},EN:{title:"",content:p.EditorState.createEmpty()}}),[A,j]=(0,o.useState)(!1),[w,k]=(0,o.useState)(""),[_,D]=(0,o.useState)("success");(0,o.useEffect)((()=>{(async()=>{try{const t=await f.A.getBlog(e,v.access);y({CN:{title:t.cn_title||"",content:p.EditorState.createWithContent((0,p.convertFromRaw)(JSON.parse(t.cn_content)))},EN:{title:t.en_title||"",content:p.EditorState.createWithContent((0,p.convertFromRaw)(JSON.parse(t.en_content)))}})}catch(t){console.error("Error fetching blog data:",t)}})()}),[e,v.access]);const J={title:"cn"===N?"\u6807\u9898":"Title",content:"cn"===N?"\u5185\u5bb9":"Content",submit:"cn"===N?"\u63d0\u4ea4":"Submit"};return(0,m.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[(0,m.jsx)(x.A,{}),(0,m.jsxs)(r.A,{sx:{flex:1,display:"flex",flexDirection:"column",maxWidth:1e3,width:"100%",mx:"auto",mt:11,px:2,overflow:"hidden"},children:[(0,m.jsxs)(i.A,{value:S,onChange:(t,e)=>{E(e)},sx:{flexShrink:0},variant:"fullWidth",children:[(0,m.jsx)(l.A,{label:"CN"}),(0,m.jsx)(l.A,{label:"EN"})]}),(0,m.jsxs)(r.A,{component:"form",onSubmit:async n=>{n.preventDefault();const o={cn_title:b.CN.title,en_title:b.EN.title,author:v.username,cn_content:JSON.stringify((0,p.convertToRaw)(b.CN.content.getCurrentContent())),en_content:JSON.stringify((0,p.convertToRaw)(b.EN.content.getCurrentContent()))};try{await f.A.editBlog(e,o,v.access),k("cn"===N?"\u535a\u5ba2\u5df2\u66f4\u65b0":"Blog updated"),D("success"),j(!0),t(`/blog/${e}`)}catch(r){console.error("Error editing blog:",r),k("cn"===N?"\u66f4\u65b0\u5931\u8d25":"Failed to update blog"),D("error"),j(!0)}},sx:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},children:[(0,m.jsx)(a.A,{label:0===S?`${J.title} (CN)`:`${J.title} (EN)`,variant:"filled",value:0===S?b.CN.title:b.EN.title,onChange:t=>{return e=0===S?"CN":"EN",n="title",o=t.target.value,void y((t=>({...t,[e]:{...t[e],[n]:o}})));var e,n,o},fullWidth:!0,sx:{flexShrink:0,"& .MuiFilledInput-root":{backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"},"&.Mui-focused":{backgroundColor:"transparent"}}}}),(0,m.jsx)(r.A,{sx:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:(0,m.jsx)(h.A,{editorState:0===S?b.CN.content:b.EN.content,onEditorStateChange:t=>((t,e)=>{y((n=>({...n,[t]:{...n[t],content:e}})))})(0===S?"CN":"EN",t)})}),(0,m.jsx)(r.A,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:2,mb:2,flexShrink:0},children:(0,m.jsx)(c.A,{type:"submit",variant:"contained",color:"primary",children:J.submit})})]})]}),(0,m.jsx)(s.A,{open:A,autoHideDuration:3e3,onClose:()=>{j(!1)},anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,m.jsx)(d.A,{severity:_,sx:{width:"100%"},children:w})})]})}}}]);
//# sourceMappingURL=426.24b30a99.chunk.js.map