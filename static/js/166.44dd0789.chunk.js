"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[166],{2141:(e,t,n)=>{n.d(t,{A:()=>ve});var l=n(5043),r=n(4410),a=n(579);const i=e=>{let{block:t,contentState:n,editorState:i,onEditorStateChange:o,readOnly:s}=e;const d=n.getEntity(t.getEntityAt(0)).getData(),c=(e=>{if(e.startsWith("http://api.xiluo.net/get_blog_img/")||e.startsWith("https://api.xiluo.net/get_blog_img/")){return`/Blogs/img/${e.split("/get_blog_img/")[1]}`}return e})(d.src),h=d.alt,u=d.width,g=d.height,m=(e,t)=>{if(!e)return t;if("number"===typeof e)return e;if("string"===typeof e){const n=parseInt(e.replace(/[^\d]/g,""));return isNaN(n)?t:n}return t},[x,p]=(0,l.useState)(!1),[y,f]=(0,l.useState)(!1),[A,v]=(0,l.useState)((()=>m(u,300))),[j,b]=(0,l.useState)((()=>m(g,200))),C=(0,l.useRef)(null),S=(0,l.useRef)(null),E=t.getData().get("text-align")||"none";(0,l.useEffect)((()=>{const e=e=>{S.current&&!S.current.contains(e.target)&&p(!1)};if(x)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[x]);const k=(e,n)=>{e.preventDefault(),e.stopPropagation(),f(!0);const l=e.clientX,a=e.clientY,s=A,d=j,c=s/d,h=e=>{const t=e.clientX-l,r=e.clientY-a;let i,o;"se"===n||"e"===n?(i=Math.max(50,s+t),o=i/c):"s"===n&&(o=Math.max(50,d+r),i=o*c),v(Math.min(i,800)),b(Math.min(o,600))},u=()=>{f(!1),i&&o&&((e,n)=>{if(i&&o)try{const l=i.getCurrentContent(),a=t.getEntityAt(0),s={...l.getEntity(a).getData(),width:`${e}px`,height:`${n}px`},d=l.replaceEntityData(a,s),c=r.EditorState.push(i,d,"apply-entity");o(c)}catch(l){console.error("Error updating image size:",l)}else console.warn("EditorState or onEditorStateChange is not available")})(A,j),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",u)};return(0,a.jsxs)("div",{ref:S,style:(()=>{let e="none";return"left"===E?e="left":"right"===E?e="right":"center"===E&&(e="center"),{textAlign:"none"!==e?e:"left",margin:"10px 0",position:"relative",display:"inline-block",cursor:x?"move":"pointer"}})(),onClick:e=>{e.preventDefault(),e.stopPropagation(),p(!0)},children:[(0,a.jsx)("img",{ref:C,src:c,alt:h||"",style:{width:`${A}px`,height:`${j}px`,border:x?"2px solid #1976d2":"none",borderRadius:x?"4px":"0",display:"block",margin:"center"===E?"0 auto":"0"},draggable:!1}),x&&!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{position:"absolute",bottom:-4,right:-4,width:8,height:8,backgroundColor:"#1976d2",cursor:"se-resize",borderRadius:"50%"},onMouseDown:e=>k(e,"se")}),(0,a.jsx)("div",{style:{position:"absolute",right:-4,top:"50%",transform:"translateY(-50%)",width:8,height:20,backgroundColor:"#1976d2",cursor:"e-resize",borderRadius:"4px"},onMouseDown:e=>k(e,"e")}),(0,a.jsx)("div",{style:{position:"absolute",bottom:-4,left:"50%",transform:"translateX(-50%)",width:20,height:8,backgroundColor:"#1976d2",cursor:"s-resize",borderRadius:"4px"},onMouseDown:e=>k(e,"s")}),(0,a.jsx)("div",{style:{position:"absolute",top:-30,left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0,0,0,0.8)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",whiteSpace:"nowrap"},children:(0,a.jsxs)("span",{children:[Math.round(A)," \xd7 ",Math.round(j)]})})]})]})};var o=n(8446);const s=e=>{let{children:t,entityKey:n,contentState:l}=e;const r=l.getEntity(n),{url:i}=r.getData();return(0,a.jsx)(o.A,{href:i,target:"_blank",rel:"noopener noreferrer",underline:"hover",color:"primary",sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:t})};var d=n(7353),c=n(2110),h=n(6494),u=n(4496),g=n(7600),m=n(1906),x=n(1596),p=n(9508),y=n(7392),f=n(1954),A=n(2081),v=n(1387),j=n(7805);const b=e=>{let{block:t,contentState:n,blockProps:r}=e;const[i,o]=(0,l.useState)(!0),[s,b]=(0,l.useState)(!1),C=n.getEntity(t.getEntityAt(0)),{url:S,type:E="iframe",width:k="100%",height:I="400"}=C.getData(),w=(null===r||void 0===r?void 0:r.readOnly)||!1,F=()=>{o(!0),b(!1);const e=document.querySelector(`iframe[data-embed-url="${S}"]`);e&&(e.src=e.src)},R=()=>{r&&r.onRemove&&r.onRemove(t.getKey())},L=e=>{try{return new URL(e).hostname}catch{return e}};return"preview"===E?(0,a.jsx)(d.A,{sx:{my:2},children:(0,a.jsxs)(c.A,{variant:"outlined",children:[(0,a.jsxs)(h.A,{children:[(0,a.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,a.jsx)(f.A,{sx:{mr:1,color:"text.secondary"}}),(0,a.jsx)(u.A,{variant:"body2",color:"text.secondary",children:L(S)})]}),(0,a.jsx)(u.A,{variant:"h6",component:"div",sx:{mb:1},children:"Embedded Website"}),(0,a.jsx)(u.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:S})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(m.A,{size:"small",startIcon:(0,a.jsx)(A.A,{}),onClick:()=>window.open(S,"_blank"),children:"Open"}),!w&&(0,a.jsx)(m.A,{size:"small",startIcon:(0,a.jsx)(v.A,{}),onClick:R,color:"error",children:"Remove"})]})]})}):(0,a.jsx)(d.A,{sx:{my:2},children:(0,a.jsxs)(x.A,{variant:"outlined",sx:{overflow:"hidden",position:"relative"},children:[(0,a.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1,bgcolor:e=>"dark"===e.palette.mode?"grey.900":"grey.50",borderBottom:"1px solid",borderColor:"divider"},children:[(0,a.jsxs)(d.A,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(f.A,{sx:{mr:1,fontSize:16,color:"text.secondary"}}),(0,a.jsx)(u.A,{variant:"body2",color:"text.secondary",children:L(S)})]}),(0,a.jsxs)(d.A,{children:[(0,a.jsx)(p.A,{title:"Refresh",children:(0,a.jsx)(y.A,{size:"small",onClick:F,children:(0,a.jsx)(j.A,{fontSize:"small"})})}),(0,a.jsx)(p.A,{title:"Open in new tab",children:(0,a.jsx)(y.A,{size:"small",onClick:()=>window.open(S,"_blank"),children:(0,a.jsx)(A.A,{fontSize:"small"})})}),!w&&(0,a.jsx)(p.A,{title:"Remove embed",children:(0,a.jsx)(y.A,{size:"small",onClick:R,color:"error",children:(0,a.jsx)(v.A,{fontSize:"small"})})})]})]}),i&&(0,a.jsx)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:I+"px",bgcolor:e=>"dark"===e.palette.mode?"grey.800":"grey.100"},children:(0,a.jsx)(u.A,{variant:"body2",color:"text.secondary",children:"Loading..."})}),s&&(0,a.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:I+"px",bgcolor:e=>"dark"===e.palette.mode?"grey.800":"grey.100",textAlign:"center",p:2},children:[(0,a.jsx)(u.A,{variant:"body2",color:"error",gutterBottom:!0,children:"Failed to load website"}),(0,a.jsx)(u.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"This website may not allow embedding or may be temporarily unavailable."}),(0,a.jsxs)(d.A,{sx:{mt:2},children:[!w&&(0,a.jsx)(m.A,{size:"small",variant:"outlined",startIcon:(0,a.jsx)(j.A,{}),onClick:F,sx:{mr:1},children:"Try Again"}),(0,a.jsx)(m.A,{size:"small",variant:"outlined",startIcon:(0,a.jsx)(A.A,{}),onClick:()=>window.open(S,"_blank"),children:"Open in New Tab"})]})]}),(0,a.jsx)("iframe",{"data-embed-url":S,src:S,width:k,height:I+"px",style:{border:"none",display:i||s?"none":"block"},onLoad:()=>{o(!1),b(!1)},onError:()=>{o(!1),b(!0)},title:`Embedded content from ${L(S)}`,sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-presentation"})]})})};var C=n(7275),S=n(5263),E=n(9336),k=n(4730),I=n(5222);const w=e=>{let{editorState:t,onUndo:n,onRedo:l}=e;return(0,a.jsxs)(d.A,{sx:{display:"flex",gap:0},children:[(0,a.jsx)(p.A,{title:"Undo",children:(0,a.jsx)("span",{children:(0,a.jsx)(y.A,{size:"small",onClick:n,disabled:0===t.getUndoStack().size,children:(0,a.jsx)(k.A,{fontSize:"small"})})})}),(0,a.jsx)(p.A,{title:"Redo",children:(0,a.jsx)("span",{children:(0,a.jsx)(y.A,{size:"small",onClick:l,disabled:0===t.getRedoStack().size,children:(0,a.jsx)(I.A,{fontSize:"small"})})})})]})};var F=n(3193),R=n(9285),L=n(1449);const D=e=>{let{fontHandlers:t}=e;return(0,a.jsxs)(d.A,{display:"flex",alignItems:"center",gap:.5,children:[(0,a.jsx)(F.A,{size:"small",sx:{width:100},children:(0,a.jsx)(R.A,{value:t.getCurrentFontFamily(),onChange:e=>t.handleFontFamily(e.target.value),displayEmpty:!0,sx:{height:32},children:t.fontFamilies.map((e=>(0,a.jsx)(L.A,{value:e,sx:{fontFamily:e},children:e},e)))})}),(0,a.jsx)(F.A,{size:"small",sx:{minWidth:70},children:(0,a.jsx)(R.A,{value:t.getCurrentFontSize(),onChange:e=>t.handleFontSize(e.target.value),sx:{height:32},children:t.fontSizes.map((e=>(0,a.jsx)(L.A,{value:e,children:e},e)))})})]})};var B=n(2560),z=n(7199),T=n(3127),O=n(160),U=n(1578),H=n(4875),M=n(5225);const $=e=>{let{editorState:t,onInlineStyle:n}=e;const l=t.getCurrentInlineStyle(),r=[{style:"BOLD",icon:B.A,title:"Bold"},{style:"ITALIC",icon:z.A,title:"Italic"},{style:"UNDERLINE",icon:T.A,title:"Underline"},{style:"STRIKETHROUGH",icon:O.A,title:"Strikethrough"},{style:"SUPERSCRIPT",icon:U.A,title:"Superscript"},{style:"SUBSCRIPT",icon:H.A,title:"Subscript"},{style:"CODE",icon:M.A,title:"Code"}];return(0,a.jsx)(d.A,{sx:{display:"flex",gap:0},children:r.map((e=>{let{style:t,icon:r,title:i}=e;return(0,a.jsx)(p.A,{title:i,children:(0,a.jsx)(y.A,{size:"small",onClick:()=>n(t),color:l.has(t)?"primary":"default",children:(0,a.jsx)(r,{fontSize:"small"})})},t)}))})};var _=n(8903),W=n(1020),N=n(263),K=n(5825);const G=e=>{let{editorState:t,onInlineStyle:n}=e;const[r,i]=(0,l.useState)(null),[o,s]=(0,l.useState)(null),c=t.getCurrentInlineStyle(),h=[{name:"Black",value:"#000000"},{name:"Red",value:"#FF0000"},{name:"Green",value:"#00FF00"},{name:"Blue",value:"#0000FF"},{name:"Orange",value:"#FFA500"},{name:"Purple",value:"#800080"},{name:"Pink",value:"#FFC0CB"},{name:"Brown",value:"#A52A2A"},{name:"Gray",value:"#808080"},{name:"Navy",value:"#000080"},{name:"Teal",value:"#008080"},{name:"Maroon",value:"#800000"}],g=[{name:"None",value:"transparent"},{name:"Yellow",value:"#FFFF00"},{name:"Green",value:"#90EE90"},{name:"Pink",value:"#FFB6C1"},{name:"Blue",value:"#ADD8E6"},{name:"Orange",value:"#FFE4B5"},{name:"Purple",value:"#DDA0DD"},{name:"Red",value:"#FFA07A"},{name:"Gray",value:"#D3D3D3"}],m=()=>{i(null)},x=()=>{s(null)},f=h.some((e=>c.has(`COLOR_${e.value.replace("#","")}`))),A=g.some((e=>c.has(`HIGHLIGHT_${e.value.replace("#","").replace("transparent","NONE")}`))),v=e=>{let{colors:t,onColorSelect:n,title:l}=e;return(0,a.jsxs)(d.A,{sx:{p:2,width:240},children:[(0,a.jsx)(u.A,{variant:"subtitle2",sx:{mb:1},children:l}),(0,a.jsx)(_.Ay,{container:!0,spacing:1,children:t.map((e=>(0,a.jsx)(_.Ay,{item:!0,children:(0,a.jsx)(p.A,{title:e.name,children:(0,a.jsx)(d.A,{onClick:()=>n(e.value),sx:{width:24,height:24,backgroundColor:"transparent"===e.value?"#fff":e.value,border:"transparent"===e.value?"2px solid #ddd":"1px solid #ddd",borderRadius:1,cursor:"pointer",position:"relative","&:hover":{transform:"scale(1.1)",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},..."transparent"===e.value&&{"&::before":{content:'""',position:"absolute",top:"50%",left:"10%",right:"10%",height:"2px",backgroundColor:"#ff0000",transform:"translateY(-50%) rotate(45deg)"}}}})})},e.name)))})]})};return(0,a.jsxs)(d.A,{sx:{display:"flex",gap:.2},children:[(0,a.jsx)(p.A,{title:"Text Color",children:(0,a.jsx)(y.A,{size:"small",onClick:e=>{i(e.currentTarget)},color:f?"primary":"default",children:(0,a.jsx)(N.A,{fontSize:"small"})})}),(0,a.jsx)(p.A,{title:"Highlight Color",children:(0,a.jsx)(y.A,{size:"small",onClick:e=>{s(e.currentTarget)},color:A?"primary":"default",children:(0,a.jsx)(K.A,{fontSize:"small"})})}),(0,a.jsx)(W.Ay,{open:Boolean(r),anchorEl:r,onClose:m,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,a.jsx)(v,{colors:h,onColorSelect:e=>{let t=c;h.forEach((e=>{const n=`COLOR_${e.value.replace("#","")}`;t.has(n)&&(t=t.remove(n))}));const l=`COLOR_${e.replace("#","")}`;n(l),m()},title:"Text Color"})}),(0,a.jsx)(W.Ay,{open:Boolean(o),anchorEl:o,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,a.jsx)(v,{colors:g,onColorSelect:e=>{let t=c;g.forEach((e=>{const n=`HIGHLIGHT_${e.value.replace("#","").replace("transparent","NONE")}`;t.has(n)&&(t=t.remove(n))}));const l=`HIGHLIGHT_${e.replace("#","").replace("transparent","NONE")}`;n(l),x()},title:"Highlight Color"})})]})};var P=n(3239),Y=n(1219),Z=n(3158),X=n(2068);const V=e=>{const t=e.getData().get("text-align");return t?`text-align-${t}`:null},q=e=>{const t=e.getSelection(),n=e.getCurrentContent(),l=t.getStartKey(),r=n.getBlockForKey(l);return{blockType:r.getType(),blockData:r.getData(),currentAlignment:r.getData().get("text-align")}},J=e=>{let{editorState:t,onAlignment:n}=e;const{currentAlignment:l}=q(t),r=[{alignment:"left",icon:P.A,title:"Align Left"},{alignment:"center",icon:Y.A,title:"Align Center"},{alignment:"right",icon:Z.A,title:"Align Right"},{alignment:"justify",icon:X.A,title:"Justify"}];return(0,a.jsx)(d.A,{sx:{display:"flex",gap:0},children:r.map((e=>{let{alignment:t,icon:r,title:i}=e;return(0,a.jsx)(p.A,{title:i,children:(0,a.jsx)(y.A,{size:"small",onClick:()=>n(t),color:l===t?"primary":"default",children:(0,a.jsx)(r,{fontSize:"small"})})},t)}))})};var Q=n(6490),ee=n(4175);const te=e=>{let{editorState:t,onBlockType:n}=e;const{blockType:l}=q(t),r=[{type:"unordered-list-item",icon:Q.A,title:"Bullet List"},{type:"ordered-list-item",icon:ee.A,title:"Numbered List"}];return(0,a.jsx)(d.A,{sx:{display:"flex",gap:0},children:r.map((e=>{let{type:t,icon:r,title:i}=e;return(0,a.jsx)(p.A,{title:i,children:(0,a.jsx)(y.A,{size:"small",onClick:()=>n(t),color:l===t?"primary":"default",children:(0,a.jsx)(r,{fontSize:"small"})})},t)}))})};var ne=n(35),le=n(6600),re=n(5316),ae=n(5795),ie=n(9347),oe=n(8356),se=n(4391),de=n(416),ce=n(2487),he=n(5475),ue=n(5127);const ge=e=>{let{open:t,onClose:n,imageUrl:r,setImageUrl:i,imageAlt:o,setImageAlt:s,onInsert:c}=e;const[h,g]=(0,l.useState)("300"),[x,p]=(0,l.useState)("200"),[y,f]=(0,l.useState)("none"),[A,v]=(0,l.useState)(!1),[j,b]=(0,l.useState)(!1),C=e=>{try{return new URL(e),!0}catch{return!1}},S=()=>{i(""),s(""),g("300"),p("200"),f("none"),v(!1),b(!1),n()};return(0,l.useEffect)((()=>{if(r&&C(r)){const e=new Image;e.onload=()=>{let{width:t,height:n}=e;if(t>500||n>400){const e=Math.min(500/t,400/n);t=Math.round(t*e),n=Math.round(n*e)}g(t.toString()),p(n.toString()),v(!0),b(!1)},e.onerror=()=>{b(!0),v(!1)},e.src=r}else v(!1),b(!1)}),[r]),(0,a.jsxs)(ne.A,{open:t,onClose:S,maxWidth:"md",fullWidth:!0,children:[(0,a.jsx)(le.A,{children:"Insert Image from URL"}),(0,a.jsx)(re.A,{children:(0,a.jsxs)(d.A,{sx:{mt:1},children:[(0,a.jsx)(ae.A,{autoFocus:!0,margin:"dense",label:"Image URL",type:"url",fullWidth:!0,variant:"outlined",value:r,onChange:e=>i(e.target.value),placeholder:"https://example.com/image.jpg",sx:{mb:2},error:!(!r||C(r)),helperText:r&&!C(r)?"Please enter a valid URL":"Enter the URL of the image you want to insert"}),(0,a.jsx)(ae.A,{margin:"dense",label:"Alt Text",type:"text",fullWidth:!0,variant:"outlined",value:o,onChange:e=>s(e.target.value),placeholder:"Description of the image",sx:{mb:2},helperText:"Alternative text for accessibility (optional)"}),(0,a.jsxs)(d.A,{sx:{display:"flex",gap:2,mb:2},children:[(0,a.jsx)(ae.A,{margin:"dense",label:"Width (px)",type:"number",variant:"outlined",value:h,onChange:e=>g(e.target.value),placeholder:"300",sx:{flex:1},inputProps:{min:50,max:1e3}}),(0,a.jsx)(ae.A,{margin:"dense",label:"Height (px)",type:"number",variant:"outlined",value:x,onChange:e=>p(e.target.value),placeholder:"200",sx:{flex:1},inputProps:{min:50,max:800}})]}),(0,a.jsxs)(F.A,{fullWidth:!0,margin:"dense",sx:{mb:2},children:[(0,a.jsx)(oe.A,{children:"Alignment"}),(0,a.jsxs)(R.A,{value:y,onChange:e=>f(e.target.value),label:"Alignment",children:[(0,a.jsx)(L.A,{value:"none",children:"Default"}),(0,a.jsx)(L.A,{value:"left",children:"Left"}),(0,a.jsx)(L.A,{value:"center",children:"Center"}),(0,a.jsx)(L.A,{value:"right",children:"Right"})]})]}),r&&C(r)&&(0,a.jsxs)(d.A,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[(0,a.jsx)(u.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Preview:"}),(0,a.jsx)(d.A,{sx:{display:"flex",justifyContent:"center"===y?"center":"right"===y?"flex-end":"flex-start",p:1,border:"1px solid #ddd",borderRadius:1,bgcolor:"white",minHeight:"100px",alignItems:"center"},children:j?(0,a.jsx)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100px",color:"error.main"},children:(0,a.jsx)(u.A,{variant:"body2",children:"Failed to load image"})}):(0,a.jsx)("img",{src:r,alt:o||"Preview",style:{maxWidth:"100%",maxHeight:"200px",width:"auto",height:"auto",border:"1px solid #ddd",borderRadius:"4px"},onLoad:()=>{v(!0),b(!1)},onError:()=>{v(!1),b(!0)}})}),A&&(0,a.jsxs)(u.A,{variant:"caption",color:"text.secondary",sx:{mt:1},children:["Image will be resized to ",h," \xd7 ",x," pixels"]})]})]})}),(0,a.jsxs)(ie.A,{children:[(0,a.jsx)(m.A,{onClick:S,children:"Cancel"}),(0,a.jsx)(m.A,{onClick:()=>{r.trim()&&C(r)&&c({url:r.trim(),alt:o.trim(),width:parseInt(h)||300,height:parseInt(x)||200,alignment:y})},variant:"contained",disabled:!r.trim()||!C(r),children:"Insert Image"})]})]})},me=e=>{let{editorState:t,imageHandlers:n,fileInputRef:r,linkHandlers:i,embedHandlers:o}=e;const[s,c]=(0,l.useState)(!1),[h,g]=(0,l.useState)(""),[x,f]=(0,l.useState)(""),[A,v]=(0,l.useState)(!1),[j,b]=(0,l.useState)(!1),[C,S]=(0,l.useState)(""),[E,k]=(0,l.useState)("iframe"),[I,w]=(0,l.useState)("100%"),[D,B]=(0,l.useState)("400"),z=()=>{c(!1),g(""),f(""),v(!1)},T=()=>{b(!1),S(""),k("iframe"),w("100%"),B("400")},O=e=>{try{return new URL(e),!0}catch{return!1}},U=null!==i.getCurrentLinkEntity(t);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.A,{sx:{display:"flex",gap:0},children:[(0,a.jsx)(p.A,{title:U?"Edit Link":"Insert Link",children:(0,a.jsx)(y.A,{size:"small",onClick:()=>{const e=t.getSelection(),n=t.getCurrentContent().getBlockForKey(e.getStartKey()).getText().slice(e.getStartOffset(),e.getEndOffset()),l=i.getCurrentLinkEntity(t);if(l){const e=t.getCurrentContent().getEntity(l).getData();g(e.url||""),f(n||e.text||""),v(!0)}else g(""),f(n||""),v(!1);c(!0)},color:U?"primary":"default",children:(0,a.jsx)(de.A,{fontSize:"small"})})}),U&&(0,a.jsx)(p.A,{title:"Remove Link",children:(0,a.jsx)(y.A,{size:"small",onClick:()=>{i.removeLink()},children:(0,a.jsx)(ce.A,{fontSize:"small"})})}),(0,a.jsx)(p.A,{title:"Embed Website",children:(0,a.jsx)(y.A,{size:"small",onClick:()=>{b(!0)},children:(0,a.jsx)(ue.A,{fontSize:"small"})})}),(0,a.jsx)(p.A,{title:"Insert Image",children:(0,a.jsx)("span",{children:(0,a.jsx)(y.A,{size:"small",onClick:e=>{var t;const l=e.currentTarget.getBoundingClientRect(),i=(0,a.jsxs)(d.A,{sx:{position:"fixed",top:l.bottom+5,left:l.left,bgcolor:"background.paper",boxShadow:3,borderRadius:1,p:1,zIndex:1e3,minWidth:150},children:[(0,a.jsx)(m.A,{size:"small",fullWidth:!0,onClick:()=>{var e;(()=>{var e;null===(e=r.current)||void 0===e||e.click()})(),null===(e=document.getElementById("image-menu"))||void 0===e||e.remove()},sx:{mb:1,justifyContent:"flex-start",textTransform:"none"},children:"From Local"}),(0,a.jsx)(m.A,{size:"small",fullWidth:!0,onClick:()=>{var e;n.setImageDialogOpen(!0),null===(e=document.getElementById("image-menu"))||void 0===e||e.remove()},sx:{justifyContent:"flex-start",textTransform:"none"},children:"From URL"})]});null===(t=document.getElementById("image-menu"))||void 0===t||t.remove();const o=document.createElement("div");o.id="image-menu",document.body.appendChild(o);(0,se.H)(o).render(i);const s=()=>{var e;null===(e=document.getElementById("image-menu"))||void 0===e||e.remove(),document.removeEventListener("click",s)};setTimeout((()=>{document.addEventListener("click",s)}),100)},children:(0,a.jsx)(he.A,{fontSize:"small"})})})})]}),(0,a.jsxs)(ne.A,{open:s,onClose:z,maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(le.A,{children:A?"Edit Link":"Insert Link"}),(0,a.jsx)(re.A,{children:(0,a.jsxs)(d.A,{sx:{mt:1},children:[(0,a.jsx)(ae.A,{autoFocus:!0,margin:"dense",label:"URL",type:"url",fullWidth:!0,variant:"outlined",value:h,onChange:e=>g(e.target.value),placeholder:"https://example.com",sx:{mb:2}}),(0,a.jsx)(ae.A,{margin:"dense",label:"Display Text",type:"text",fullWidth:!0,variant:"outlined",value:x,onChange:e=>f(e.target.value),placeholder:"Link text (optional)",helperText:"Leave empty to use the URL as display text"})]})}),(0,a.jsxs)(ie.A,{children:[(0,a.jsx)(m.A,{onClick:z,children:"Cancel"}),(0,a.jsx)(m.A,{onClick:()=>{h.trim()&&(A?i.updateLink(h,x):i.insertLink(h,x)),z()},variant:"contained",disabled:!h.trim(),children:A?"Update":"Insert"})]})]}),(0,a.jsx)(ge,{open:n.imageDialogOpen,onClose:()=>n.setImageDialogOpen(!1),imageUrl:n.imageUrl,setImageUrl:n.setImageUrl,imageAlt:n.imageAlt,setImageAlt:n.setImageAlt,onInsert:e=>{n&&n.handleImageUrlInsert&&n.handleImageUrlInsert(e)}}),(0,a.jsxs)(ne.A,{open:j,onClose:T,maxWidth:"md",fullWidth:!0,children:[(0,a.jsx)(le.A,{children:"Embed Website"}),(0,a.jsx)(re.A,{children:(0,a.jsxs)(d.A,{sx:{mt:1},children:[(0,a.jsx)(ae.A,{autoFocus:!0,margin:"dense",label:"Website URL",type:"url",fullWidth:!0,variant:"outlined",value:C,onChange:e=>S(e.target.value),placeholder:"https://example.com",sx:{mb:2},error:!(!C||O(C)),helperText:C&&!O(C)?"Please enter a valid URL":"Enter the URL of the website you want to embed"}),(0,a.jsxs)(F.A,{fullWidth:!0,margin:"dense",sx:{mb:2},children:[(0,a.jsx)(oe.A,{children:"Embed Type"}),(0,a.jsxs)(R.A,{value:E,onChange:e=>k(e.target.value),label:"Embed Type",children:[(0,a.jsx)(L.A,{value:"iframe",children:"IFrame"}),(0,a.jsx)(L.A,{value:"preview",children:"Link Preview"})]})]}),(0,a.jsxs)(d.A,{sx:{display:"flex",gap:2},children:[(0,a.jsx)(ae.A,{margin:"dense",label:"Width",type:"text",variant:"outlined",value:I,onChange:e=>w(e.target.value),placeholder:"100%",sx:{flex:1},helperText:"e.g., 100%, 800px"}),(0,a.jsx)(ae.A,{margin:"dense",label:"Height",type:"text",variant:"outlined",value:D,onChange:e=>B(e.target.value),placeholder:"400",sx:{flex:1},helperText:"Height in pixels"})]}),C&&O(C)&&(0,a.jsxs)(d.A,{sx:{mt:2,p:2,bgcolor:"grey.50",borderRadius:1},children:[(0,a.jsx)(u.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Preview:"}),(0,a.jsx)(d.A,{sx:{border:"1px solid #ddd",borderRadius:1,overflow:"hidden",height:"200px"},children:(0,a.jsx)("iframe",{src:C,width:"100%",height:"100%",style:{border:"none"},title:"Website Preview"})})]})]})}),(0,a.jsxs)(ie.A,{children:[(0,a.jsx)(m.A,{onClick:T,children:"Cancel"}),(0,a.jsx)("span",{children:(0,a.jsx)(m.A,{onClick:()=>{if(C.trim()){const e={url:C,type:E,width:I,height:D};o&&o.insertEmbed&&o.insertEmbed(e)}T()},variant:"contained",disabled:!C.trim()||!O(C),children:"Embed"})})]})]})]})},xe=e=>{let{editorState:t,handlers:n,fontHandlers:r,imageHandlers:i,linkHandlers:o,embedHandlers:s,fileInputRef:c}=e;const h=[{key:"undo-redo",component:(0,a.jsx)(w,{editorState:t,onUndo:n.handleUndo,onRedo:n.handleRedo})},{key:"font-controls",component:(0,a.jsx)(D,{fontHandlers:r})},{key:"color-controls",component:(0,a.jsx)(G,{editorState:t,onInlineStyle:n.handleInlineStyle})},{key:"text-style",component:(0,a.jsx)($,{editorState:t,onInlineStyle:n.handleInlineStyle})},{key:"alignment",component:(0,a.jsx)(J,{editorState:t,onAlignment:n.handleAlignment})},{key:"list",component:(0,a.jsx)(te,{editorState:t,onBlockType:n.handleBlockType})},{key:"misc",component:(0,a.jsx)(me,{editorState:t,imageHandlers:i,linkHandlers:o,embedHandlers:s,fileInputRef:c})}];return(0,a.jsx)(S.A,{variant:"dense",sx:{minHeight:48,borderBottom:"1px solid #e0e0e0",flexWrap:"wrap",gap:0,px:1,py:.5,alignItems:"flex-start"},children:h.map(((e,t)=>(0,a.jsxs)(l.Fragment,{children:[(0,a.jsx)(d.A,{sx:{display:"flex",alignItems:"center",flexShrink:0,minHeight:40},children:e.component}),t<h.length-1&&(0,a.jsx)(E.A,{orientation:"vertical",flexItem:!0,sx:{mx:1,alignSelf:"stretch",minHeight:30}})]},e.key)))})},pe=[10,11,12,14,16,18,20,22,24,30,36,48,60],ye=["Arial","Georgia","Times New Roman","Impact","Verdana"],fe=e=>`FONTFAMILY_${e.replace(/\s+/g,"_").toUpperCase()}`,Ae=(e,t)=>({handleFontSize:n=>{e.getSelection();let l=e;pe.forEach((e=>{l.getCurrentInlineStyle().has(`FONTSIZE_${e}`)&&(l=r.RichUtils.toggleInlineStyle(l,`FONTSIZE_${e}`))})),t(r.RichUtils.toggleInlineStyle(l,`FONTSIZE_${n}`))},handleFontFamily:n=>{let l=e;ye.forEach((e=>{const t=fe(e);l.getCurrentInlineStyle().has(t)&&(l=r.RichUtils.toggleInlineStyle(l,t))}));const a=fe(n);t(r.RichUtils.toggleInlineStyle(l,a))},getCurrentFontSize:()=>{const t=e.getCurrentInlineStyle();return pe.find((e=>t.has(`FONTSIZE_${e}`)))||""},getCurrentFontFamily:()=>{const t=e.getCurrentInlineStyle();return ye.find((e=>{const n=fe(e);return t.has(n)}))||""},fontSizes:pe,fontFamilies:ye}),ve=e=>{let{editorState:t,onEditorStateChange:n,placeholder:o="",readOnly:c=!1}=e;const h=(0,l.useRef)(null),u=c?null:((e,t)=>({handleKeyCommand:(e,n)=>{const l=r.RichUtils.handleKeyCommand(n,e);return l?(t(l),"handled"):"not-handled"},handleInlineStyle:n=>{t(r.RichUtils.toggleInlineStyle(e,n))},handleBlockType:n=>{t(r.RichUtils.toggleBlockType(e,n))},handleAlignment:n=>{const l=e.getSelection(),a=e.getCurrentContent(),i=l.getStartKey(),o=a.getBlockForKey(i).getData(),s=o.get("text-align")===n?void 0:n,d=s?o.set("text-align",s):o.delete("text-align"),c=r.Modifier.setBlockData(a,l,d),h=r.EditorState.push(e,c,"change-block-data");t(h)},handleUndo:()=>{t(r.EditorState.undo(e))},handleRedo:()=>{t(r.EditorState.redo(e))}}))(t,n),g=c?null:Ae(t,n),m=c?null:((e,t)=>{const[n,a]=(0,l.useState)(!1),[i,o]=(0,l.useState)(""),[s,d]=(0,l.useState)(""),c=function(n){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"none";const s=e.getCurrentContent().createEntity("IMAGE","IMMUTABLE",{src:n,alt:l,width:`${a}px`,height:`${i}px`}),d=s.getLastCreatedEntityKey();let c=r.EditorState.set(e,{currentContent:s});if(c=r.AtomicBlockUtils.insertAtomicBlock(c,d," "),o&&"none"!==o){const e=c.getCurrentContent(),t=c.getSelection(),n=t.getStartKey(),l=e.getBlockForKey(n).getData().set("text-align",o),a=r.Modifier.setBlockData(e,t,l);c=r.EditorState.push(c,a,"change-block-data")}t(c)};return{imageDialogOpen:n,setImageDialogOpen:a,imageUrl:i,setImageUrl:o,imageAlt:s,setImageAlt:d,handleFileUpload:e=>{const t=e.target.files[0];if(t&&t.type.startsWith("image/")){const e=new FileReader;e.onload=e=>{const n=new Image;n.onload=()=>{let{width:l,height:r}=n;if(l>500||r>400){const e=Math.min(500/l,400/r);l*=e,r*=e}c(e.target.result,t.name,Math.round(l),Math.round(r))},n.src=e.target.result},e.readAsDataURL(t)}e.target.value=""},handleImageUrlInsert:e=>{e&&e.url&&c(e.url,e.alt||"",e.width||300,e.height||200,e.alignment||"none"),o(""),d(""),a(!1)},handleImageUrlInsertLegacy:()=>{if(i.trim()){const e=new Image;e.onload=()=>{let{width:t,height:n}=e;if(t>500||n>400){const e=Math.min(500/t,400/n);t*=e,n*=e}c(i.trim(),s.trim(),Math.round(t),Math.round(n))},e.onerror=()=>{c(i.trim(),s.trim(),300,200)},e.src=i.trim(),o(""),d(""),a(!1)}},insertImage:c}})(t,n),x=c?null:((e,t)=>{const[n,a]=(0,l.useState)(!1),i=e=>{const t=e.getSelection(),n=e.getCurrentContent(),l=t.getStartKey(),r=t.getStartOffset(),a=n.getBlockForKey(l).getEntityAt(r);return a&&"LINK"===n.getEntity(a).getType()?a:null};return{linkDialogOpen:n,setLinkDialogOpen:a,getCurrentLinkEntity:i,insertLink:(n,l)=>{const a=e.getSelection(),i=e.getCurrentContent().createEntity("LINK","MUTABLE",{url:n,text:l}),o=i.getLastCreatedEntityKey();let s,d;if(a.isCollapsed()){const e=l||n;s=r.Modifier.insertText(i,a,e,null,o)}else s=r.Modifier.applyEntity(i,a,o);if(d=r.EditorState.push(e,s,"apply-entity"),a.isCollapsed()){const e=l||n,t=a.merge({anchorOffset:a.getAnchorOffset()+e.length,focusOffset:a.getFocusOffset()+e.length});d=r.EditorState.forceSelection(d,t)}t(d)},updateLink:(n,l)=>{e.getSelection();const a=e.getCurrentContent(),o=i(e);if(o){const i=a.mergeEntityData(o,{url:n,text:l}),s=r.EditorState.push(e,i,"apply-entity");t(s)}},removeLink:()=>{const n=e.getSelection(),l=i(e);if(l){const a=e.getCurrentContent(),i=n.getStartKey(),o=a.getBlockForKey(i);let s=null,d=null;if(o.findEntityRanges((e=>e.getEntity()===l),((e,t)=>{s=e,d=t})),null!==s&&null!==d){const n=r.SelectionState.createEmpty(i).merge({anchorOffset:s,focusOffset:d}),l=r.Modifier.applyEntity(a,n,null),o=r.EditorState.push(e,l,"apply-entity");t(o)}}},hasLinkInSelection:()=>null!==i(e)}})(t,n),p=c?null:((e,t)=>{const[n,a]=(0,l.useState)(!1);return{embedDialogOpen:n,setEmbedDialogOpen:a,insertEmbed:n=>{const l=e.getCurrentContent().createEntity("EMBED","IMMUTABLE",n),a=l.getLastCreatedEntityKey(),i=r.EditorState.set(e,{currentContent:l}),o=r.AtomicBlockUtils.insertAtomicBlock(i,a," ");t(o)},removeEmbed:n=>{const l=e.getCurrentContent(),a=l.getBlockMap().delete(n),i=l.merge({blockMap:a}),o=r.EditorState.push(e,i,"remove-range");t(o)}}})(t,n),y=[{strategy:(e,t,n)=>{e.findEntityRanges((e=>{const t=e.getEntity();return null!==t&&"LINK"===n.getEntity(t).getType()}),t)},component:e=>{let{children:t,entityKey:n,contentState:l}=e;return(0,a.jsx)(s,{entityKey:n,contentState:l,children:t})}}],f=((e,t)=>{const n={};return e&&e.forEach((e=>{n[`FONTSIZE_${e}`]={fontSize:`${e}px`}})),t&&t.forEach((e=>{const t=e.replace(/\s+/g,"_").toUpperCase();n[`FONTFAMILY_${t}`]={fontFamily:e}})),[{name:"Black",value:"#000000"},{name:"Red",value:"#FF0000"},{name:"Green",value:"#00FF00"},{name:"Blue",value:"#0000FF"},{name:"Orange",value:"#FFA500"},{name:"Purple",value:"#800080"},{name:"Pink",value:"#FFC0CB"},{name:"Brown",value:"#A52A2A"},{name:"Gray",value:"#808080"},{name:"Navy",value:"#000080"},{name:"Teal",value:"#008080"},{name:"Maroon",value:"#800000"}].forEach((e=>{const t=e.value.replace("#","");n[`COLOR_${t}`]={color:e.value}})),[{name:"Yellow",value:"#FFFF00"},{name:"Green",value:"#90EE90"},{name:"Pink",value:"#FFB6C1"},{name:"Blue",value:"#ADD8E6"},{name:"Orange",value:"#FFE4B5"},{name:"Purple",value:"#DDA0DD"},{name:"Red",value:"#FFA07A"},{name:"Gray",value:"#D3D3D3"}].forEach((e=>{const t=e.value.replace("#","");n[`HIGHLIGHT_${t}`]={backgroundColor:e.value}})),n.HIGHLIGHT_NONE={backgroundColor:"transparent"},n})((null===g||void 0===g?void 0:g.fontSizes)||[10,11,12,14,16,18,20,22,24,30,36,48,60],(null===g||void 0===g?void 0:g.fontFamilies)||["Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"]);return(0,a.jsxs)(d.A,{sx:{display:"flex",flexDirection:"column",height:c?"auto":"100%",minHeight:0},children:[(0,a.jsx)("style",{children:'\n        .text-align-left { text-align: left !important; }\n        .text-align-center { text-align: center !important; }\n        .text-align-right { text-align: right !important; }\n        .text-align-justify { text-align: justify !important; }\n        .public-DraftEditor-content div[data-block="true"] {\n          margin-bottom: 10px !important;\n        }\n      '}),!c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",ref:h,style:{display:"none"},accept:"image/*",onChange:m.handleFileUpload}),(0,a.jsxs)(d.A,{sx:{flexShrink:0},children:[" ",(0,a.jsx)(xe,{editorState:t,handlers:u,fontHandlers:g,imageHandlers:m,linkHandlers:x,embedHandlers:p,fileInputRef:h})]})]}),(0,a.jsx)(d.A,{sx:{width:c?"auto":870,maxWidth:"100%",border:"none",borderLeft:c?"none":"1px solid #e0e0e0",borderRight:c?"none":"1px solid #e0e0e0",borderBottom:c?"none":"1px solid #e0e0e0",margin:c?"none":"0 auto",padding:c?"none":"10px",flex:c?"none":1,display:"flex",flexDirection:"column",minHeight:0,overflow:c?"visible":"hidden"},children:(0,a.jsx)(d.A,{sx:{flex:1,overflow:c?"visible":"auto",minHeight:c?"auto":"400px","& .rdw-editor-main":{height:c?"auto":"100%",minHeight:c?"auto":"100%"},"& .DraftEditor-root":{height:c?"auto":"100%",minHeight:c?"auto":"100%"},"& .DraftEditor-editorContainer":{height:c?"auto":"100%",minHeight:c?"auto":"100%"},"& .public-DraftEditor-content":{height:c?"auto":"100%",minHeight:c?"auto":"300px"}},children:(0,a.jsx)(C.Editor,{editorState:t,onEditorStateChange:n,placeholder:o,readOnly:c,handleKeyCommand:null===u||void 0===u?void 0:u.handleKeyCommand,customStyleMap:f,blockStyleFn:V,blockRendererFn:e=>{if("atomic"===e.getType()){const n=t.getCurrentContent().getEntity(e.getEntityAt(0));if(n){const e=n.getType();if("IMAGE"===e)return{component:i,editable:!1};if("EMBED"===e)return{component:b,editable:!1,props:{onRemove:null===p||void 0===p?void 0:p.removeEmbed,readOnly:c}}}}return null},decorators:y,toolbarHidden:!0,mention:{separator:" ",trigger:"@"},editorStyle:{height:c?"auto":"100%",minHeight:c?"auto":"100%"}})})})]})}},330:(e,t,n)=>{n.d(t,{A:()=>r});var l=n(4505);const r={getBlog:async(e,t)=>{try{return(await l.A.get(`/blog/${e}/`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(n){throw console.error("Error fetching blog:",n),n}},addBlog:async(e,t)=>{try{const n=new FormData;for(const[t,l]of Object.entries(e))n.append(t,l);return(await l.A.post("/add_blog/",n,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error adding blog:",n),n}},editBlog:async function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];try{console.log(t);const a=r?"patch":"put",i=new FormData;for(const e in t)void 0!==t[e]&&null!==t[e]&&i.append(e,t[e]);return(await l.A[a](`/edit_blog/${e}/`,i,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error editing blog:",a),a}},toggleVisibility:async(e,t)=>{try{return(await l.A.patch(`/edit_visibility/${e}/`,null,{headers:{Authorization:`Bearer ${t}`}})).data}catch(n){throw console.error("Error toggling blog visibility:",n),n}},getMeta:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{const r=new FormData;null!==t&&null!==n&&(r.append("page",t),r.append("page_size",n));return(await l.A.post("/get_blog_meta/",r,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${e}`}})).data}catch(r){throw console.error("Error fetching blog metadata:",r),r}},deleteBlog:async(e,t)=>{try{return(await l.A.delete(`/delete_blog/${e}/`,{headers:{Authorization:`Bearer ${t}`}})).status}catch(n){throw console.error("Error deleting blog:",n),n}},getDraft:async(e,t)=>{try{return(await l.A.get(`/get_draft_blog/${e}/`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(n){throw console.error("Error fetching draft:",n),n}},saveDraft:async(e,t)=>{try{const n=new FormData;for(const[t,l]of Object.entries(e))n.append(t,l);return(await l.A.post("/save_draft_blog/",n,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error saving draft:",n),n}}}}}]);
//# sourceMappingURL=166.44dd0789.chunk.js.map