"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[990],{4367:(e,t,n)=>{n.d(t,{A:()=>x});var a=n(7353),r=n(9252),l=n(8446),o=n(5043),s=n(1045),i=n(4496),c=n(6295),d=n(579);function h(e){let{language:t}=e;return(0,d.jsxs)(i.A,{variant:"body1",sx:{color:"text.secondary",mt:1,typography:{md:"body1"}},children:["All Rights Reserved \xa9 ",(0,d.jsx)(l.A,{color:"text.secondary",href:"https://xiluo.net/",sx:{typography:{md:"body1"}},children:"xiluo.net"}),"\xa0",(new Date).getFullYear()]})}function x(){const{language:e,themeMode:t}=(0,o.useContext)(c.l),x="cn"===e?"/md/cn/terms":"/md/en/terms",p="cn"===e?"/md/cn/privacy":"/md/en/privacy";return(0,d.jsx)(o.Fragment,{children:(0,d.jsxs)(r.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:{md:"space-between"},alignItems:{xs:"flex-start",md:"center"},px:{xs:4},py:{xs:2,sm:5}},children:[(0,d.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:{xs:2,sm:3},textAlign:"left",alignItems:"flex-start",mb:{xs:2,md:0},pb:2,width:"100%",borderBottom:e=>({xs:`1px solid ${e.palette.divider}`,sm:"none"})},children:[(0,d.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[(0,d.jsx)(s.A,{src:n(5567),alt:"Steven Logo",sx:{width:30,height:30,overflow:"hidden"}}),(0,d.jsx)(i.A,{variant:"body1",sx:{color:"text.secondary",fontStyle:"italic",fontWeight:600,letterSpacing:.5},children:"Thy sky is the limit."})]}),(0,d.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:2},children:[{path:"/",labelCn:"\u9996\u9875",labelEn:"Home"},{path:"/notes",labelCn:"\u7b14\u8bb0",labelEn:"Notes"},{path:"/blogs",labelCn:"\u535a\u5ba2",labelEn:"Blogs"},{path:"/projects",labelCn:"\u9879\u76ee",labelEn:"Projects"},{path:"/fin",labelCn:"\u91d1\u878d\u9762\u677f",labelEn:"Finance"},{path:"/profile",labelCn:"\u4e2a\u4eba\u7b80\u4ecb",labelEn:"Profile"}].map((t=>{let{path:n,labelCn:a,labelEn:r}=t;return(0,d.jsx)(l.A,{color:"text.secondary",variant:"body1",href:n,sx:{typography:{md:"body1"}},children:"cn"===e?a:r},n)}))})]}),(0,d.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:{xs:"flex-start",md:"flex-end"},textAlign:{xs:"left",md:"right"},gap:1,mt:{md:2}},children:[(0,d.jsxs)(a.A,{sx:{display:"flex",flexDirection:"row",gap:2},children:[(0,d.jsx)(i.A,{variant:"body1",sx:{fontWeight:"medium"},children:"cn"===e?"\u6cd5\u5f8b":"Legal"}),[{label:"cn"===e?"\u6761\u6b3e":"Terms",path:x},{label:"cn"===e?"\u9690\u79c1":"Privacy",path:p}].map((e=>{let{label:t,path:n}=e;return(0,d.jsx)(l.A,{color:"text.secondary",variant:"body1",href:n,children:t},t)}))]}),(0,d.jsx)(h,{language:e})]})]})})}},1990:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var a=n(5043),r=n(7353),l=n(9252),o=n(4494),s=n(6295),i=n(4367),c=n(4496),d=n(8903),h=n(1637),x=n(1547),p=n(579);const g=e=>{let{data:t}=e;const n=(0,a.useRef)(null),r=(0,a.useRef)(null),{themeMode:l,language:o}=(0,a.useContext)(s.l);return(0,a.useEffect)((()=>{if(!t||!t.history||0===t.history.length)return void console.error("Invalid data format");const e="dark"===l,a="cn"===o,s={width:n.current.clientWidth,layout:{background:{color:e?"#1a1a1a":"#f5f5f5",type:"solid"},textColor:e?"#d1d4dc":"#000000"},grid:{vertLines:{color:e?"#2B2B43":"#E0E0E0"},horzLines:{color:e?"#2B2B43":"#E0E0E0"}},crosshair:{mode:1,vertLine:{color:"#758696",width:1,style:1,labelBackgroundColor:e?"#1a1a1a":"#FFFFFF"},horzLine:{color:"#758696",width:1,style:1,labelBackgroundColor:e?"#1a1a1a":"#FFFFFF"}},timeScale:{borderColor:e?"#2B2B43":"#E0E0E0"},rightPriceScale:{borderColor:e?"#2B2B43":"#E0E0E0",scaleMargins:{top:.1,bottom:.2}},watermark:{visible:!1},credits:{enabled:!1}},i=(0,x.R9)(n.current,s);i.priceScale("right");i.priceScale("left").applyOptions({scaleMargins:{top:.8,bottom:0},visible:!1});const c=i.addCandlestickSeries({upColor:a?"#ef5350":"#26a69a",downColor:a?"#26a69a":"#ef5350",borderVisible:!1,wickUpColor:a?"#ef5350":"#26a69a",wickDownColor:a?"#26a69a":"#ef5350"}),d=i.addHistogramSeries({color:"#26a69a50",priceFormat:{type:"volume"},priceScaleId:"left"}),h=t.history.map((e=>({time:new Date(e.Date).getTime()/1e3,open:e.Open,high:e.High,low:e.Low,close:e.Close}))),p=t.history.map((e=>({time:new Date(e.Date).getTime()/1e3,value:e.Volume,color:e.Close>=e.Open?a?"#ef535050":"#26a69a50":a?"#26a69a50":"#ef535050"})));c.setData(h),d.setData(p);const g=document.createElement("div");g.style.position="absolute",g.style.left="1px",g.style.top="1px",g.style.zIndex="1",g.style.fontSize="12px",g.style.fontFamily="sans-serif",g.style.color=e?"#d1d4dc":"#131722",g.style.display="flex",g.style.gap="8px",g.style.alignItems="center",r.current=g,n.current.appendChild(g),i.subscribeCrosshairMove((e=>{if(!e.time||!e.point)return void(g.style.display="none");const t=e.seriesData.get(c),n=e.seriesData.get(d);if(!t||!n)return void(g.style.display="none");g.style.display="flex";const r=new Date(1e3*e.time);let l;if(a){l=`${r.getFullYear()}/${String(r.getMonth()+1).padStart(2,"0")}/${String(r.getDate()).padStart(2,"0")}`}else{l=`${r.getDate()}/${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r.getMonth()]}/${r.getFullYear()}`}const o=e=>e.toFixed(2),s=a?"\u5f00":"O",i=a?"\u9ad8":"H",h=a?"\u4f4e":"L",x=a?"\u6536":"C",p=a?"\u91cf":"V";var u;g.innerHTML=`\n        <span>${l}</span>\n        <span>${s}: ${o(t.open)}</span>\n        <span>${i}: ${o(t.high)}</span>\n        <span>${h}: ${o(t.low)}</span>\n        <span>${x}: ${o(t.close)}</span>\n        <span>${p}: ${u=n.value,u>=1e6?(u/1e6).toFixed(2)+"M":u>=1e3?(u/1e3).toFixed(2)+"K":u.toFixed(0)}</span>\n      `}));const u=document.createElement("style");u.textContent="\n      #tv-attr-logo {\n        display: none !important;\n      }\n    ",document.head.appendChild(u);const y=()=>{i.applyOptions({width:n.current.clientWidth})};return window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y),document.head.removeChild(u),r.current&&n.current&&n.current.removeChild(r.current),i.remove()}}),[t,l,o]),(0,p.jsx)("div",{ref:n,style:{width:"100%",height:"250px",backgroundColor:"dark"===l?"#1a1a1a":"#FFFFFF",position:"relative"}})};var u=n(4505);const y={get_stock_history_data:async(e,t)=>{try{return(await u.A.get(`/get_stock_history_data/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data}catch(n){throw console.error("Error fetching stock history data:",n),n}}};var m=n(2139),f=n(2678);const b=e=>{let{themeMode:t,language:n}=e;const{userState:l}=(0,f.J)(),[o,s]=(0,a.useState)({ASX200:{data:null,error:null},SSE:{data:null,error:null},SP500:{data:null,error:null},FTSE:{data:null,error:null}}),i={ASX200:"^AXJO",SSE:"000001.SS",SP500:"^GSPC",FTSE:"^FTSE"};(0,a.useEffect)((()=>{(async()=>{l.access&&Object.keys(i).forEach((async e=>{try{const t=await y.get_stock_history_data(i[e],l.access);s((n=>({...n,[e]:{data:t,error:null}})))}catch(t){console.error(`Failed to fetch data for ${e}:`,t),s((t=>({...t,[e]:{data:null,error:"Failed to load data"}})))}}))})()}),[l.access]);const x=(e,a)=>{const r=(e=>{if(!e||e.history.length<2)return null;const t=e.history[e.history.length-1].Close,n=e.history[e.history.length-2].Close,a=t-n;return{change:a,percentageChange:a/n*100}})(a);return(0,p.jsxs)(c.A,{variant:"h6",sx:{fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",color:"dark"===t?"white":"black"},children:[e,r&&(0,p.jsxs)(c.A,{variant:"subtitle1",component:"span",sx:{marginLeft:1,fontWeight:600,color:r.change>=0?"cn"===n?"#ef5350":"#26a69a":"cn"===n?"#26a69a":"#ef5350"},children:[r.change>=0?"+":"",r.change.toFixed(2)," /",r.change>=0?" +":" ",r.percentageChange.toFixed(2),"%"]})]})};return(0,p.jsx)(d.Ay,{container:!0,spacing:2,sx:{height:"100%"},children:[{title:"ASX 200",key:"ASX200"},{title:"SSE (Shanghai)",key:"SSE"},{title:"S&P 500",key:"SP500"},{title:"FTSE",key:"FTSE"}].map(((e,t)=>{const{data:n,error:a}=o[e.key];return(0,p.jsx)(d.Ay,{item:!0,xs:12,sm:6,sx:{height:{xs:"25%",sm:"50%"}},children:(0,p.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",border:"1px solid #ccc",borderRadius:2},children:[x(e.title,n),(0,p.jsx)(r.A,{sx:{width:"100%",height:"250px",display:"flex",justifyContent:"center",alignItems:"center"},children:a?(0,p.jsx)(m.A,{sx:{color:"error.main",fontSize:48}}):n?(0,p.jsx)(g,{data:n}):(0,p.jsx)(h.A,{color:"primary"})})]})},t)}))})},v=()=>{const{language:e,themeMode:t}=(0,a.useContext)(s.l);return(0,p.jsxs)(r.A,{children:[(0,p.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,p.jsx)(o.A,{}),(0,p.jsx)(l.A,{maxWidth:"lg",sx:{flex:1,padding:2,mt:12},children:(0,p.jsx)(b,{themeMode:t,language:e})})]}),(0,p.jsx)(r.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"background.default",borderTop:e=>({xs:"none",md:`1px solid ${e.palette.divider}`}),maxWidth:e=>e.breakpoints.values.lg,width:"100%",mx:"auto"},children:(0,p.jsx)(i.A,{})})]})}}}]);
//# sourceMappingURL=990.c490c003.chunk.js.map